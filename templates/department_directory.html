{% extends "base.html" %}

{% block title %}Department Directory{% endblock %}

{% block header %}Department Directory{% endblock %}

{% block content %}
<h2>Employees by Department</h2>

<!-- Supervisor Section -->
<div style="margin-bottom: 20px;">
    <h3 style="background: linear-gradient(135deg, #8233C5, #E963FD); color: white; padding: 12px; border-radius: 8px; cursor: pointer;" onclick="toggleSection('supervisor')">
        üë®‚Äçüíº Supervisors ({{ employees_by_type.supervisor|length }}) ‚ñº
    </h3>
    <div id="supervisor" style="display: none;">
        <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
            <thead>
                <tr style="background: #e9ecef;">
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Name</th>
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Email</th>
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Employee ID</th>
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Nationality</th>
                </tr>
            </thead>
            <tbody>
                {% for employee in employees_by_type.supervisor %}
                <tr>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.full_name }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.email }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.employee_id }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.nationality }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Office Employees Section -->
<div style="margin-bottom: 20px;">
    <h3 style="background: linear-gradient(135deg, #903775, #E8458B); color: white; padding: 12px; border-radius: 8px; cursor: pointer;" onclick="toggleSection('office')">
        üíº Office Employees ({{ employees_by_type.office|length }}) ‚ñº
    </h3>
    <div id="office" style="display: none;">
        <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
            <thead>
                <tr style="background: #e9ecef;">
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Name</th>
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Email</th>
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Employee ID</th>
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Nationality</th>
                </tr>
            </thead>
            <tbody>
                {% for employee in employees_by_type.office %}
                <tr>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.full_name }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.email }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.employee_id }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.nationality }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<!-- Factory Workers Section -->
<div style="margin-bottom: 20px;">
    <h3 style="background: linear-gradient(135deg, #335CC5, #637FFD); color: white; padding: 12px; border-radius: 8px; cursor: pointer;" onclick="toggleSection('factory')">
        üè≠ Factory Workers ({{ employees_by_type.factory|length }}) ‚ñº
    </h3>
    <div id="factory" style="display: none;">
        <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
            <thead>
                <tr style="background: #e9ecef;">
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Name</th>
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Email</th>
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Employee ID</th>
                    <th style="padding: 10px; text-align: left; border-bottom: 1px solid #ddd;">Nationality</th>
                </tr>
            </thead>
            <tbody>
                {% for employee in employees_by_type.factory %}
                <tr>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.full_name }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.email }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.employee_id }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ employee.nationality }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
    function toggleSection(sectionId) {
        const section = document.getElementById(sectionId);
        const header = section.previousElementSibling;

        if (section.style.display === 'none') {
            section.style.display = 'block';
            header.innerHTML = header.innerHTML.replace('‚ñº', '‚ñ≤');
        } else {
            section.style.display = 'none';
            header.innerHTML = header.innerHTML.replace('‚ñ≤', '‚ñº');
        }
    }
</script>
{% endblock %}